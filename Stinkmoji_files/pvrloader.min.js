THREE.PVRLoader=function(r){this.manager=void 0!==r?r:THREE.DefaultLoadingManager,this._parser=THREE.PVRLoader.parse},THREE.PVRLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.PVRLoader.prototype.constructor=THREE.PVRLoader,THREE.PVRLoader.parse=function(r,a){var e=13,t=new Uint32Array(r,0,e),o={buffer:r,header:t,loadMipmaps:a};return 55727696===t[0]?THREE.PVRLoader._parseV3(o):559044176===t[11]?THREE.PVRLoader._parseV2(o):void console.error("THREE.PVRLoader: Unknown PVR format.")},THREE.PVRLoader._parseV3=function(r){var a,e,t=r.header,o=t[12],R=t[2],E=t[6],p=t[7],P=t[10],m=t[11];switch(R){case 0:a=2,e=THREE.RGB_PVRTC_2BPPV1_Format;break;case 1:a=2,e=THREE.RGBA_PVRTC_2BPPV1_Format;break;case 2:a=4,e=THREE.RGB_PVRTC_4BPPV1_Format;break;case 3:a=4,e=THREE.RGBA_PVRTC_4BPPV1_Format;break;default:console.error("THREE.PVRLoader: Unsupported PVR format:",R)}return r.dataPtr=52+o,r.bpp=a,r.format=e,r.width=p,r.height=E,r.numSurfaces=P,r.numMipmaps=m,r.isCubemap=6===P,THREE.PVRLoader._extract(r)},THREE.PVRLoader._parseV2=function(r){var a,e,t=r.header,o=t[0],R=t[1],E=t[2],p=t[3],P=t[4],m=t[10],n=t[12],i=255,V=24,s=25,d=P&i,T=m>0;return d===s?(e=T?THREE.RGBA_PVRTC_4BPPV1_Format:THREE.RGB_PVRTC_4BPPV1_Format,a=4):d===V?(e=T?THREE.RGBA_PVRTC_2BPPV1_Format:THREE.RGB_PVRTC_2BPPV1_Format,a=2):console.error("THREE.PVRLoader: Unknown PVR format:",d),r.dataPtr=o,r.bpp=a,r.format=e,r.width=E,r.height=R,r.numSurfaces=n,r.numMipmaps=p+1,r.isCubemap=6===n,THREE.PVRLoader._extract(r)},THREE.PVRLoader._extract=function(r){var a={mipmaps:[],width:r.width,height:r.height,format:r.format,mipmapCount:r.numMipmaps,isCubemap:r.isCubemap},e=r.buffer,t=r.dataPtr,o=r.bpp,R=r.numSurfaces,E=0,p=0,P=0,m=0,n=0,i=0;2===o?(P=8,m=4):(P=4,m=4),p=P*m*o/8,a.mipmaps.length=r.numMipmaps*R;for(var V=0;V<r.numMipmaps;){var s=r.width>>V,d=r.height>>V;n=s/P,i=d/m,n<2&&(n=2),i<2&&(i=2),E=n*i*p;for(var T=0;T<R;T++){var u=new Uint8Array(e,t,E),_={data:u,width:s,height:d};a.mipmaps[T*r.numMipmaps+V]=_,t+=E}V++}return a};